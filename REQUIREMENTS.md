# Домашний календарь → Семейный таск-трекер
Функционально-техническое описание и структура экранов

## 1. Назначение документа

Документ описывает функциональную модель домашнего календаря, расширенного до полноценного семейного таск-трекера.
Цель — сформировать единый набор требований, на основе которых CloudCode может генерировать frontend, backend и API.

Продукт ориентирован на использование внутри семейной группы с общей видимостью задач, ролями и прозрачностью выполнения.

---

## 2. Цели продукта

### 2.1 Основные цели

1. Единое пространство планирования задач семьи.
2. Прозрачность выполнения задач между участниками.
3. Снижение устных договорённостей.
4. Контроль сроков и ответственности.
5. Удобное повседневное использование без перегруженности.

### 2.2 Основные сценарии использования

- Планирование бытовых задач.
- Распределение обязанностей.
- Совместное планирование событий.
- Контроль выполнения.
- Ведение регулярных задач.

---

## 3. Роли и доступ

### 3.1 Роли

- Owner — владелец семьи.
- Admin — администратор.
- Member — участник.
- Child — ограниченный участник.
- Guest — просмотр.

### 3.2 Общие правила доступа

- Все сущности принадлежат `family_id`.
- Проверка прав происходит на каждом API запросе.
- Все изменения записываются в журнал событий.

### 3.3 Права ролей

**Owner**
- управление семьёй
- приглашения
- изменение ролей
- удаление семьи
- экспорт данных

**Admin**
- управление участниками (кроме Owner)
- управление списками и настройками

**Member**
- создание и редактирование задач
- комментарии
- выполнение задач

**Child**
- выполнение назначенных задач
- комментарии
- ограниченные изменения

**Guest**
- просмотр разрешённых задач

---

## 4. Доменная модель

### 4.1 Основные сущности

- Family
- Membership
- Role
- Task
- TaskAssignment
- TaskList / Project
- ChecklistItem
- Comment
- Attachment
- Tag
- RecurrenceRule
- NotificationRule
- AuditEvent

### 4.2 Поля задачи

- id
- family_id
- created_by
- title
- description
- status
- priority
- start_at
- due_at
- all_day
- assignees
- visibility
- reminders
- recurrence_rule
- tags
- created_at
- updated_at
- completed_at

---

## 5. Эпики и функциональные требования

## 5.1 Представления и навигация

### Представления

- Календарь (месяц / неделя / день)
- Список задач
- Канбан-доска
- Семейная сводка

### Фильтры

- исполнитель
- статус
- список
- тег
- период
- сегодня
- просроченные
- мои задачи

### UX требования

- быстрое создание задачи
- drag-and-drop
- пустые состояния с подсказками

---

## 5.2 Задачи как основной объект системы

### Жизненный цикл

- backlog
- planned
- in_progress
- done
- canceled
- archived

### Исполнители

- несколько исполнителей
- наблюдатели

### Чек-листы

- подзадачи
- прогресс выполнения
- зависимость завершения от чек-листа

### Комментарии

- обсуждение задачи
- упоминания участников

### Вложения

- файлы
- ссылки

### Теги и приоритеты

- семейные теги
- сортировка по приоритету

---

## 5.3 Повторяемость и шаблоны

### Повторяющиеся задачи

- ежедневно
- еженедельно
- ежемесячно
- кастомные интервалы

### Исключения

- пропуск одного повторения
- перенос экземпляра
- разрыв серии

### Шаблоны

- шаблоны задач
- шаблоны чек-листов

---

## 5.4 Домашние сценарии

### Ротация обязанностей

- циклическая смена исполнителей
- автоматическое назначение

### Список покупок

- быстрые позиции
- отметка выполнения
- преобразование в задачу

### События

- задачи-события
- привязка задач к событию

---

## 5.5 Уведомления

### Каналы

- внутренние уведомления
- push (опционально)
- email (опционально)

### Правила

- до срока
- в момент срока
- уведомления о просрочке

### Персональные настройки

- тихие часы
- выбор типов уведомлений

---

## 5.6 Журнал и прозрачность

### История задачи

- кто изменил
- что изменилось
- время изменения

### Активность семьи

- лента активности
- фильтры по участникам

---

## 6. API требования (контуры)

### Основные группы

- Auth
- Family
- Tasks
- Comments
- Attachments
- Tags
- Recurrence
- Notifications
- Analytics

### Требования к list задач

- пагинация
- сортировка
- фильтрация

---

## 7. Нефункциональные требования

### Надёжность

- привязка к family_id
- soft delete
- безопасные миграции

### Производительность

- загрузка "Сегодня" < 1 сек
- оптимизация запросов календаря

### Безопасность

- проверка прав
- изоляция семей
- rate limiting

---

## 8. Структура экранов

## 8.1 Экран авторизации

Назначение
Вход пользователя и подключение к семье.

Функционал
- вход
- восстановление пароля
- принятие приглашения

---

## 8.2 Главный экран (Семейная сводка)

Назначение
Обзор текущего состояния.

Функционал
- задачи на сегодня
- просроченные
- ближайшие события
- активность участников
- быстрое создание задачи

---

## 8.3 Календарь

Назначение
Визуальное планирование.

Функционал
- месяц / неделя / день
- перенос задач
- создание по дате
- просмотр задач дня

---

## 8.4 Список задач

Назначение
Рабочий режим управления.

Функционал
- сортировка
- фильтры
- массовые действия
- быстрое редактирование

---

## 8.5 Канбан-доска

Назначение
Контроль прогресса.

Функционал
- колонки по статусам
- drag-and-drop
- создание задач в колонке

---

## 8.6 Карточка задачи

Назначение
Основной экран работы с задачей.

Функционал
- описание
- исполнители
- сроки
- чек-лист
- комментарии
- вложения
- история
- повторяемость

---

## 8.7 Создание / редактирование задачи

Назначение
Быстрое создание.

Функционал
- название
- дата
- исполнитель
- приоритет
- расширенные настройки

---

## 8.8 Списки / Проекты

Назначение
Группировка задач.

Функционал
- создание списков
- настройка доступа
- шаблоны задач

---

## 8.9 Экран покупок

Назначение
Совместный список покупок.

Функционал
- быстрые позиции
- отметка купленного
- история изменений
- преобразование в задачу

---

## 8.10 Уведомления

Назначение
Контроль событий.

Функционал
- лента уведомлений
- переход к задаче
- отметка прочитанным

---

## 8.11 Активность семьи

Назначение
Прозрачность действий.

Функционал
- действия участников
- фильтры по времени и пользователю

---

## 8.12 Управление семьёй

Назначение
Администрирование.

Функционал
- участники
- приглашения
- роли
- удаление участников
- передача владения

---

## 8.13 Профиль пользователя

Назначение
Персональные настройки.

Функционал
- имя
- аватар
- уведомления
- тихие часы
- часовой пояс

---

## 8.14 Настройки семьи

Назначение
Общие правила работы.

Функционал
- теги
- статусы задач
- правила повторяемости
- приватность
