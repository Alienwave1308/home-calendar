<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="theme-color" content="#2f9f68">
  <title>–ü–∞–Ω–µ–ª—å –º–∞—Å—Ç–µ—Ä–∞</title>
  <link rel="stylesheet" href="booking.css">
  <link rel="stylesheet" href="master.css">
</head>
<body>
  <div id="app">
    <div class="master-header">
      <h1>–ü–∞–Ω–µ–ª—å –º–∞—Å—Ç–µ—Ä–∞</h1>
      <button class="btn-back" id="btnLogout" onclick="MasterApp.logout()">–í—ã–π—Ç–∏</button>
    </div>

    <!-- Tabs -->
    <nav class="master-tabs" id="masterTabs">
      <button class="master-tab active" data-tab="today" onclick="MasterApp.switchTab('today')">–°–µ–≥–æ–¥–Ω—è</button>
      <button class="master-tab" data-tab="bookings" onclick="MasterApp.switchTab('bookings')">–ó–∞–ø–∏—Å–∏</button>
      <button class="master-tab" data-tab="services" onclick="MasterApp.switchTab('services')">–£—Å–ª—É–≥–∏</button>
      <button class="master-tab" data-tab="settings" onclick="MasterApp.switchTab('settings')">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
    </nav>

    <!-- Tab: Today -->
    <section class="tab-panel" id="tabToday">
      <div id="todayBookings" class="bookings-list"></div>
      <div id="todayEmpty" class="empty-state" style="display:none;">
        <div class="empty-icon">üéâ</div>
        <p>–ù–∞ —Å–µ–≥–æ–¥–Ω—è –∑–∞–ø–∏—Å–µ–π –Ω–µ—Ç</p>
        <p class="empty-hint">–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å—Å—ã–ª–∫–æ–π –¥–ª—è –∑–∞–ø–∏—Å–∏ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏</p>
      </div>
    </section>

    <!-- Tab: Bookings -->
    <section class="tab-panel" id="tabBookings" style="display:none;">
      <div class="bookings-filters">
        <button class="btn-primary btn-create-booking" onclick="MasterApp.openBookingForm()">–°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å</button>
        <select id="bookingsStatus" onchange="MasterApp.loadBookings()">
          <option value="">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
          <option value="pending">–û–∂–∏–¥–∞—é—Ç</option>
          <option value="confirmed">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω—ã</option>
          <option value="completed">–ó–∞–≤–µ—Ä—à–µ–Ω—ã</option>
          <option value="canceled">–û—Ç–º–µ–Ω–µ–Ω—ã</option>
        </select>
      </div>
      <div id="bookingsList" class="bookings-list"></div>
      <div id="bookingsEmpty" class="empty-state" style="display:none;">
        <div class="empty-icon">üìÖ</div>
        <p>–ó–∞–ø–∏—Å–µ–π –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>
      </div>
    </section>

    <!-- Tab: Services -->
    <section class="tab-panel" id="tabServices" style="display:none;">
      <div id="servicesList" class="services-list"></div>
      <div id="servicesEmpty" class="empty-state" style="display:none;">
        <div class="empty-icon">üíá</div>
        <p>–î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ—é –ø–µ—Ä–≤—É—é —É—Å–ª—É–≥—É</p>
        <button class="btn-secondary" style="margin-top:10px;" onclick="MasterApp.bootstrapDefaultServices()">
          –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–∞–π—Å –ø–æ —à–∞–±–ª–æ–Ω—É
        </button>
      </div>
      <button class="btn-primary" style="margin-top:16px;" onclick="MasterApp.showAddService()">–î–æ–±–∞–≤–∏—Ç—å —É—Å–ª—É–≥—É</button>
      <button class="btn-secondary" style="margin-top:10px;" onclick="MasterApp.bootstrapDefaultServices()">
        –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–∞–π—Å –ø–æ —à–∞–±–ª–æ–Ω—É
      </button>
    </section>

    <!-- Tab: Settings -->
    <section class="tab-panel" id="tabSettings" style="display:none;">
      <div class="settings-card">
        <h3>–°—Å—ã–ª–∫–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏</h3>
        <div class="link-copy-row">
          <input type="text" id="bookingLink" readonly class="link-input">
          <button class="btn-secondary btn-copy" onclick="MasterApp.copyLink()">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
        </div>
      </div>
      <div class="settings-card">
        <h3>Google Calendar</h3>
        <div id="gcalStatus" class="gcal-status"></div>
      </div>
      <div class="settings-card">
        <h3>Apple Calendar</h3>
        <div id="appleCalStatus" class="gcal-status">–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞...</div>
        <div id="appleCalLinkRow" class="link-copy-row" style="display:none; margin-top:8px;">
          <input type="text" id="appleCalendarLink" readonly class="link-input">
          <button class="btn-secondary btn-copy" onclick="MasterApp.copyAppleLink()">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
        </div>
        <button id="appleCalendarOpenBtn" class="btn-secondary btn-open-apple" onclick="MasterApp.openAppleCalendar()" style="display:none; margin-top:8px;">
          –û—Ç–∫—Ä—ã—Ç—å –≤ Apple Calendar
        </button>
        <div class="apple-actions">
          <button class="btn-secondary" onclick="MasterApp.enableAppleCalendar()">–í–∫–ª—é—á–∏—Ç—å</button>
          <button class="btn-secondary" onclick="MasterApp.rotateAppleCalendar()">–û–±–Ω–æ–≤–∏—Ç—å —Å—Å—ã–ª–∫—É</button>
          <button class="btn-secondary" onclick="MasterApp.disableAppleCalendar()">–û—Ç–∫–ª—é—á–∏—Ç—å</button>
        </div>
      </div>
      <div class="settings-card">
        <h3>–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è</h3>
        <div id="reminderSettings"></div>
      </div>
      <div class="settings-card">
        <h3>–°–≤–æ–±–æ–¥–Ω—ã–µ –æ–∫–Ω–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏</h3>
        <p class="settings-hint">–î–æ–±–∞–≤—å—Ç–µ —Ä–∞–±–æ—á–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏. –ö–ª–∏–µ–Ω—Ç—ã –±—É–¥—É—Ç –≤–∏–¥–µ—Ç—å —Å–ª–æ—Ç—ã —Ç–æ–ª—å–∫–æ –≤ —ç—Ç–∏—Ö –æ–∫–Ω–∞—Ö.</p>
        <div class="availability-form">
          <select id="availabilityDay">
            <option value="1">–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫</option>
            <option value="2">–í—Ç–æ—Ä–Ω–∏–∫</option>
            <option value="3">–°—Ä–µ–¥–∞</option>
            <option value="4">–ß–µ—Ç–≤–µ—Ä–≥</option>
            <option value="5">–ü—è—Ç–Ω–∏—Ü–∞</option>
            <option value="6">–°—É–±–±–æ—Ç–∞</option>
            <option value="0">–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ</option>
          </select>
          <input id="availabilityStart" type="time" value="10:00">
          <input id="availabilityEnd" type="time" value="20:00">
          <input id="availabilityStep" type="number" min="5" step="5" value="30" placeholder="–®–∞–≥, –º–∏–Ω">
          <button class="btn-secondary" onclick="MasterApp.addAvailabilityRule()">–î–æ–±–∞–≤–∏—Ç—å –æ–∫–Ω–æ</button>
        </div>
        <div id="availabilityRules" class="settings-list"></div>

        <div class="availability-exclusions">
          <h4>–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞—Ç—ã</h4>
          <div class="availability-form">
            <input id="availabilityExclusionDate" type="date">
            <input id="availabilityExclusionReason" type="text" placeholder="–ü—Ä–∏—á–∏–Ω–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
            <button class="btn-secondary" onclick="MasterApp.addAvailabilityExclusion()">–î–æ–±–∞–≤–∏—Ç—å –¥–∞—Ç—É</button>
          </div>
          <div id="availabilityExclusions" class="settings-list"></div>
        </div>
      </div>
    </section>

    <!-- Network toast (reused from booking.css) -->
    <div id="networkToast" class="network-toast" style="display:none;">
      <span id="networkToastText"></span>
      <button class="toast-close" onclick="MasterApp.hideToast()">&times;</button>
    </div>
  </div>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="master.js"></script>
</body>
</html>
