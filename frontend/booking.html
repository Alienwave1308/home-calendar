<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="theme-color" content="#2f9f68">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="format-detection" content="telephone=no">
  <!-- Telegram Mini App -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <title>–ó–∞–ø–∏—Å—å</title>
  <link rel="stylesheet" href="/booking.css">
</head>
<body>
  <div id="app">
    <!-- –®–∞–≥ 1: –í—ã–±–æ—Ä —É—Å–ª—É–≥–∏ -->
    <section class="step" id="stepServices">
      <div class="step-header">
        <h1 id="masterName" class="master-name"></h1>
        <p class="step-subtitle">–í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É</p>
      </div>
      <div id="servicesList" class="services-list">
        <!-- skeleton or services -->
      </div>
      <div id="servicesEmpty" class="empty-state" style="display:none;">
        <div class="empty-icon">üìã</div>
        <p>–£ –º–∞—Å—Ç–µ—Ä–∞ –ø–æ–∫–∞ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —É—Å–ª—É–≥</p>
      </div>
    </section>

    <!-- –®–∞–≥ 2: –í—ã–±–æ—Ä –¥–∞—Ç—ã –∏ —Å–ª–æ—Ç–∞ -->
    <section class="step" id="stepSlots" style="display:none;">
      <div class="step-header">
        <button class="btn-back" onclick="BookingApp.goBack('stepServices')">&larr; –ù–∞–∑–∞–¥</button>
        <h2 id="selectedServiceName"></h2>
        <p class="step-subtitle">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è</p>
      </div>
      <div class="date-strip" id="dateStrip">
        <!-- horizontal scrollable dates -->
      </div>
      <div id="slotsList" class="slots-grid">
        <!-- skeleton or slots -->
      </div>
      <div id="slotsEmpty" class="empty-state" style="display:none;">
        <div class="empty-icon">üïê</div>
        <p>–ù–µ—Ç —Å–≤–æ–±–æ–¥–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –Ω–∞ —ç—Ç—É –¥–∞—Ç—É</p>
        <button class="btn-secondary" onclick="BookingApp.nextDate()">–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –¥–µ–Ω—å</button>
      </div>
    </section>

    <!-- –®–∞–≥ 3: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ -->
    <section class="step" id="stepConfirm" style="display:none;">
      <div class="step-header">
        <button class="btn-back" onclick="BookingApp.goBack('stepSlots')">&larr; –ù–∞–∑–∞–¥</button>
        <h2>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏</h2>
      </div>
      <div class="confirm-card">
        <div class="confirm-row">
          <span class="confirm-label">–£—Å–ª—É–≥–∞</span>
          <span id="confirmService" class="confirm-value"></span>
        </div>
        <div class="confirm-row">
          <span class="confirm-label">–î–∞—Ç–∞</span>
          <span id="confirmDate" class="confirm-value"></span>
        </div>
        <div class="confirm-row">
          <span class="confirm-label">–í—Ä–µ–º—è</span>
          <span id="confirmTime" class="confirm-value"></span>
        </div>
        <div class="confirm-row">
          <span class="confirm-label">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</span>
          <span id="confirmDuration" class="confirm-value"></span>
        </div>
        <div class="confirm-row" id="confirmPriceRow" style="display:none;">
          <span class="confirm-label">–°—Ç–æ–∏–º–æ—Å—Ç—å</span>
          <span id="confirmPrice" class="confirm-value confirm-price"></span>
        </div>
        <textarea id="confirmNote" class="confirm-note" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–ø–∏—Å–∏ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)" rows="2"></textarea>
      </div>
      <button class="btn-primary btn-book" id="btnBook" onclick="BookingApp.confirmBooking()">
        –ó–∞–ø–∏—Å–∞—Ç—å—Å—è
      </button>
    </section>

    <!-- –®–∞–≥ 4: –ì–æ—Ç–æ–≤–æ -->
    <section class="step" id="stepDone" style="display:none;">
      <div class="done-card">
        <div class="done-icon">‚úÖ</div>
        <h2>–í—ã –∑–∞–ø–∏—Å–∞–Ω—ã!</h2>
        <p id="doneDetails" class="done-details"></p>
        <div class="done-export-actions">
          <a id="doneGoogleLink" class="btn-secondary done-export-btn" href="#" target="_blank" rel="noopener noreferrer">
            –≠–∫—Å–ø–æ—Ä—Ç –≤ Google Calendar
          </a>
          <button id="doneAppleBtn" class="btn-secondary done-export-btn" type="button">
            –≠–∫—Å–ø–æ—Ä—Ç –≤ Apple Calendar (.ics)
          </button>
        </div>
        <button class="btn-primary" onclick="BookingApp.reset()">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –µ—â—ë</button>
      </div>
    </section>

    <!-- –û—à–∏–±–∫–∞ —Å–µ—Ç–∏ (toast) -->
    <div id="networkToast" class="network-toast" style="display:none;">
      <span id="networkToastText"></span>
      <button class="toast-close" onclick="BookingApp.hideToast()">&times;</button>
    </div>

    <!-- –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π –ª–æ–∞–¥–µ—Ä -->
    <div id="fullLoader" class="full-loader" style="display:none;">
      <div class="loader-spinner"></div>
    </div>
  </div>

  <script src="/booking-export-utils.js"></script>
  <script src="/booking.js"></script>
</body>
</html>
