<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#667eea">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>–î–æ–º–∞—à–Ω–∏–π –ö–∞–ª–µ–Ω–¥–∞—Ä—å</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- –≠–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
  <div class="container" id="authScreen">
    <header>
      <h1>üìÖ –î–æ–º–∞—à–Ω–∏–π –ö–∞–ª–µ–Ω–¥–∞—Ä—å</h1>
      <p>–í–æ–π–¥–∏—Ç–µ –∏–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</p>
    </header>

    <section class="auth-section">
      <div class="auth-tabs">
        <button class="auth-tab active" onclick="showAuthTab('login', this)">–í—Ö–æ–¥</button>
        <button class="auth-tab" onclick="showAuthTab('register', this)">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
      </div>

      <form id="loginForm" class="auth-form">
        <div class="form-group">
          <label for="loginUsername">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</label>
          <input type="text" id="loginUsername" placeholder="–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω" required minlength="3">
        </div>
        <div class="form-group">
          <label for="loginPassword">–ü–∞—Ä–æ–ª—å:</label>
          <input type="password" id="loginPassword" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required minlength="6">
        </div>
        <div id="loginError" class="auth-error"></div>
        <button type="submit" class="btn-primary">–í–æ–π—Ç–∏</button>
      </form>

      <form id="registerForm" class="auth-form" style="display: none;">
        <div class="form-group">
          <label for="regUsername">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</label>
          <input type="text" id="regUsername" placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ª–æ–≥–∏–Ω" required minlength="3">
        </div>
        <div class="form-group">
          <label for="regPassword">–ü–∞—Ä–æ–ª—å:</label>
          <input type="password" id="regPassword" placeholder="–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤" required minlength="6">
        </div>
        <div id="registerError" class="auth-error"></div>
        <button type="submit" class="btn-primary">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
      </form>
    </section>
  </div>

  <!-- –û—Å–Ω–æ–≤–Ω–æ–π —ç–∫—Ä–∞–Ω (—Å–∫—Ä—ã—Ç –¥–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏) -->
  <div class="container" id="appScreen" style="display: none;">
    <header>
      <h1>üìÖ –î–æ–º–∞—à–Ω–∏–π –ö–∞–ª–µ–Ω–¥–∞—Ä—å</h1>
      <div class="user-bar">
        <span id="currentUser"></span>
        <button class="btn-small btn-logout" onclick="logout()">–í—ã–π—Ç–∏</button>
      </div>
    </header>

    <!-- –°–µ–∫—Ü–∏—è —Å–µ–º—å–∏ -->
    <section class="family-section" id="familySection">
      <!-- –ï—Å–ª–∏ –Ω–µ—Ç —Å–µ–º—å–∏ -->
      <div id="noFamily">
        <h2>–°–µ–º—å—è</h2>
        <p class="family-hint">–°–æ–∑–¥–∞–π—Ç–µ —Å–µ–º—å—é –∏–ª–∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç–µ—Å—å –ø–æ –∫–æ–¥—É –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è</p>
        <div class="family-actions">
          <div class="family-create">
            <input type="text" id="familyName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ–º—å–∏" minlength="2">
            <button class="btn-primary btn-small" onclick="createFamily()">–°–æ–∑–¥–∞—Ç—å</button>
          </div>
          <div class="family-join">
            <input type="text" id="inviteCodeInput" placeholder="–ö–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è" maxlength="8">
            <button class="btn-primary btn-small" onclick="joinFamily()">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è</button>
          </div>
        </div>
        <div id="familyError" class="auth-error"></div>
      </div>
      <!-- –ï—Å–ª–∏ –µ—Å—Ç—å —Å–µ–º—å—è -->
      <div id="hasFamily" style="display: none;">
        <div class="family-header">
          <h2 id="familyTitle"></h2>
          <button class="btn-small btn-logout" onclick="leaveFamily()">–ü–æ–∫–∏–Ω—É—Ç—å</button>
        </div>
        <div class="family-info">
          <span class="invite-code">–ö–æ–¥: <strong id="familyCode"></strong></span>
        </div>
        <div class="family-members" id="familyMembers"></div>
      </div>
    </section>

    <!-- –ö–∞–ª–µ–Ω–¥–∞—Ä—å -->
    <section class="calendar-section">
      <div class="calendar-header">
        <button class="btn-small btn-nav" onclick="prevMonth()">&laquo;</button>
        <div class="calendar-title-group">
          <h2 id="calendarTitle"></h2>
          <button class="btn-today" onclick="goToday()">–°–µ–≥–æ–¥–Ω—è</button>
        </div>
        <button class="btn-small btn-nav" onclick="nextMonth()">&raquo;</button>
      </div>
      <div class="calendar-weekdays">
        <div>–ü–Ω</div><div>–í—Ç</div><div>–°—Ä</div><div>–ß—Ç</div><div>–ü—Ç</div><div class="weekend">–°–±</div><div class="weekend">–í—Å</div>
      </div>
      <div class="calendar-grid" id="calendarGrid"></div>
    </section>

    <!-- –§–æ—Ä–º–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ -->
    <section class="add-task">
      <h2>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É</h2>
      <form id="taskForm">
        <div class="form-group">
          <label for="taskTitle">–ó–∞–¥–∞—á–∞:</label>
          <input type="text" id="taskTitle" placeholder="–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å?" required>
        </div>
        <div class="form-group">
          <label for="taskDate">–î–∞—Ç–∞:</label>
          <input type="date" id="taskDate" required>
        </div>
        <button type="submit" class="btn-primary">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</button>
      </form>
    </section>

    <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å: –º–æ–∏ / —Å–µ–º–µ–π–Ω—ã–µ –∑–∞–¥–∞—á–∏ -->
    <section class="tasks-list">
      <div class="tasks-tabs" id="tasksTabs" style="display: none;">
        <button class="tasks-tab active" onclick="switchTasksView('my', this)">–ú–æ–∏ –∑–∞–¥–∞—á–∏</button>
        <button class="tasks-tab" onclick="switchTasksView('family', this)">–ó–∞–¥–∞—á–∏ —Å–µ–º—å–∏</button>
      </div>
      <h2 id="tasksTitle">–ú–æ–∏ –∑–∞–¥–∞—á–∏</h2>
      <div id="tasksContainer">
        <p class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞—á...</p>
      </div>
    </section>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–Ω—è -->
  <div class="modal-overlay" id="dayModal" style="display: none;" onclick="closeDayModal(event)">
    <div class="modal">
      <div class="modal-header">
        <h2 id="modalDate"></h2>
        <button class="btn-small btn-nav" onclick="closeDayModal()">&times;</button>
      </div>
      <div id="modalTasks"></div>
      <div class="modal-add">
        <input type="text" id="modalTaskTitle" placeholder="–ë—ã—Å—Ç—Ä–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏...">
        <button class="btn-primary btn-small" onclick="addTaskFromModal()">–î–æ–±–∞–≤–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>

